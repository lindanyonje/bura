{% extends 'shop/frontend/layouts/master.html' %}


{% load static %}

{% block 'styles' %}

<link href="{% static 'css/notiflix.css' %}" rel="stylesheet">

{% endblock %}

{% block content %}

<div class="container">

   <div class="row my-5 border border-light shadow-sm">

      <div class="col-lg-6 col-md-6 col-sm-12">
   
         <img src="{{ product.image.url }}" class="img-fluid">

      </div>

      <div class="col-lg-6 col-md-6 col-sm-12">

         <!-- <div class="product-badge">Official Store</div> -->
         <h1>Nike shoe</h1>
         <h2>Kshs {{product.cost}}</h2>

         <hr>

         <div class="btn-group">
            <button type="button" data-product="{{product.id}}" id="addCart" class="btn btn-primary"><i class="fa fa-cart-plus" 
               aria-hidden="true"></i> Add to Cart</button> 
         </div>
   
         <div class="btn-group">
            <button type="button" data-product="{{product.id}}" id="addWishlist"class="btn btn-primary"><i class="fa fa-heart-o"
                aria-hidden="true"></i> Wishlist</button> 
         </div>

      </div>





   </div>

   
    

</div>

<div class="container">

   <div class="row my-5">

      <div class="card">

         <div class="card-header">
            <h4>Product Details</h4>
         </div>

         <div class="card-body">

            <div class="col-lg-6">
               <img src="{{ product.image.url }}" class="img-fluid">
            </div>
      
            
            <div class="col-lg-6">
               <h5>Name:{{product.name}}</h5>
               <p>Cost: Kshs {{product.cost}}</p>
               <p>Description: {{product.description}}</p>
               <p>Review: {{product.review}}</p>
               <p>Status: {{product.status}}</p>
            </div>
            
         </div>


      </div>

      
   </div>

   

   
<div class="container">

   <div class="row my-5">

      <div class="card">

         <div class="card-header">
            <h4>Product Reviews</h4>
         </div>

         <div class="card-body">

            <div class="col-lg-6">
               <img src="{{ product.image.url }}" class="img-fluid">
            </div>
      
            
            <div class="col-lg-6">
               <h5>Name:{{product.name}}</h5>
               <p>Rating:{{product.rating}}</p>
               <p>Review:{{product.review}}</p>
               <p>Customer:{{product.customer_id}}</p>
            </div>
            
         </div>
      </div>

      
   </div>

   

   
  
   <div class="container">

      <div class="row my-5">
   
         <div class="card">
   
            <div class="card-header">
               </h3>Related Products</h3>
            </div>
   
            <div class="card-body">
   
               {% for product in related_products %}

               <div class="col-lg-6">
        
                  {% include 'shop/frontend/layouts/single_product.html' %}
      
               </div>
      
            {% endfor %}
               
            </div>
         </div>
   
         
      </div>
   
      
   
      
   
   
   
   



   

    <!-- <h3 class="text-center">Related Products</h3>

    <div class="row">

      {% for product in related_products %}

         <div class="col-lg-4">
  
            {% include 'shop/frontend/layouts/single_product.html' %}

         </div>

      {% endfor %}

    </div> -->

</div>




{% endblock %}

{% block 'scripts' %}

<script src="{% static 'js/notiflix.js' %}"></script>

<script>

   
$(document).ready(function(){

$.ajaxSetup({
    headers:{
        'X-CSRFToken': $('meta[name="csrf-token"]').attr('content')
    }
})
});

$("#addCart").click(function(){

   let product_id = '{{product.id}}';
   let quantity = 1;

   console.log("Here")


   $.ajax({
        type: "POST",
        url: "{% url 'add_cart' %}",
        dataType: "json",
        data:{
            'product_id':product_id,
            'quantity':quantity,
        },
        success:function(data){
        //     Remove the category from html and show success
        Notiflix.Notify.Success('Cart added successfully');

        },
        error: function(data){
            
            console.log(data);
            Notiflix.Notify.Failure('Something went wrong.');

        }

    });
    
});


$("#addWishlist").click(function(){

let product_id = '{{product.id}}';
let customer_id= '{{customer.id}}';

console.log("Here")


$.ajax({
     type: "POST",
     url: "{% url 'add_wishlist' %}",
     dataType: "json",
     data:{
         'product_id':product_id,
         'customer_id':customer_id,
     },
     success:function(data){
     //     Remove the category from html and show success
     Notiflix.Notify.Success('Wishlist added successfully');

     },
     error: function(data){
         
         console.log(data);
         Notiflix.Notify.Failure('Something went wrong.');

     }

 });
 
});

</script>

{% endblock %}


